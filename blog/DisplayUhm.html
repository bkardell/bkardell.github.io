<html lang="en" resource-type="blogpost"><head> 
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@briankardell">
    <meta name="twitter:creator" content="@briankardell">
    <meta name="twitter:title" content="display: uhm">
    <meta name="twitter:description" content="In which I talk about some stuff in the platform that I think is weird and centers around some unintuitive places.">
    
    <meta name="monetization" content="$ilp.uphold.com/kKU4GXiRwhnf ">

    <link rel="alternate" type="application/rss+xml" href="https://bkardell.com/blog/feed.rss" title="bkardell.com/blog rss feed">
    <title>display: uhm</title> 
    <style>.captioned-image {
    background-color: #eaeaea;
    display: block;
    overflow: hidden;
    padding: 1rem;
    text-align: center;
    font-style: italic;
}

.captioned-image.p-attached {
    width: 40%;
    display: inline-block;
    margin: 0 1rem 2rem 1rem;
}

section > .captioned-image.p-attached {
    margin-top: 1.5rem; /* correct for heading size*/
}

 pre { overflow-x: auto }

.captioned-image.p-attached.p-attached-left {
    float: left;
}

.captioned-image.p-attached.p-attached-right {
    float: right;
}

.captioned-image.p-attached + * + * {
    clear: both;
    margin-top: 2rem;
}


.captioned-image img, .captioned-image video {
    display: block;
    max-width: 100%;
    margin: 0 auto 1em auto;
}
.source {
    font-style: italic;
}
body {
    display: flex;
    font: 1em "Helvetica Neue", Helvetica, Arial, sans-serif;
    font-weight: 400;
    line-height: 1.625;
}
h1 { margin: 0.5rem; }
code-format {
    border-left: 0.5rem solid rgba(123,115,209,0.35);
    display: block;
    padding: 0.5rem;
    margin-bottom: 1rem;
}

contextual-heading {
    display: block;
    margin-top: 2rem;
}

[aria-level="1"] {
    color: #43686b;
    font-size: 1.45rem;
}
[aria-level="2"] {
    color: #856363;
    font-size: 1.35rem;
}
[aria-level="3"] {
    color: #856363;
    font-size: 1.25rem;
}
[aria-level="4"] {
    color: #856363;
    font-size: 1.2rem;
}
[aria-level="5"], [aria-level="6"] {
    color: #667496;
    font-size: 1.1rem;
    font-weight: bolder;
}
.posted-on {
    font-style: italic;
    font-size: 0.8rem;
    text-align: right;
    margin-bottom: 1rem;
}

ul, li {
    margin: 0.5rem;
    text-align: left;
}
header {
    padding-top: 1rem;
    padding-right: 2rem;
    background-color: #fbf5e9;
}
.tagline {
    font-style: italic;
    text-align: center;
}

[tag-esc] {
    color: maroon;
    font-family: Courier, "Lucida Console", monospace;
}

[tag-esc]::before {
    content: '<';
}

[tag-esc]::after {
    content: '>';
}

main {
    min-width: 50%;
    width: 80%;
    padding: 1rem;
}
header .title {
    background-color: rgba(123,115,209,0.35);
    padding: 0.3rem;
    padding-left: 0.25rem;
    font-weight: bolder;
    font-size: 0.9rem;
    border-left: 1rem solid #999298;
}

header .profile {
    width: 50%;
    margin: 1rem 25%;
}

header .title + nav {
    font-size: 0.9rem;
}

header .blurb {
    font-size: 0.75rem;
    text-align: center;
}
header .name {
    text-align: center;
    font-size: xx-large;
}
.segue {
    font-style: italic;
}
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0,0,0,0);
  border: 0;
}

#aboutMeToggle {
    display: none;
}

[for="aboutMeToggle"] {
    display: none;
}

main article { max-width: 100em; margin: auto; }
/* this needs rethinking, it wants a selector like 'not flow content' */
article>*:not(contextual-heading,a), section>*:not(contextual-heading,a) {
    margin-left: 0.45rem;
}

blockquote {
  font-family: serif;
  background: #f9f9f9;
  border-left: 10px solid #ccc;
  margin: 1.5em 10px;
  padding: 0.5em 10px;
}
blockquote:before {
  color: #ccc;
  content: open-quote;
  font-size: 2em;
  line-height: 0.1em;
  margin-right: 0.25em;
  vertical-align: -0.4em;
}

blockquote:after {
  color: #ccc;
  content: close-quote;
  font-size: 2em;
  line-height: 0.1em;
  margin-left: 0.25em;
  vertical-align: -0.4em;
}


@media (max-width: 800px){
    body {
        flex-direction: column;
    }
    header {
        border-bottom: 1px solid #afafff;
    }

    .captioned-image.p-attached {
        width: 100%;
        margin: 1rem 0;
    }

    .captioned-image.p-attached.p-attached-left,
    .captioned-image.p-attached.p-attached-right {
        float: none;
    }

    [for="aboutMeToggle"] {
        background-color: #675e5e;
        color: white;
        padding: 0.25rem;
        padding-left: 0.5rem;
        display: block;
        border-left: 1rem solid black;
    }
    #aboutMeToggle:focus + [for="aboutMeToggle"]{
        outline: 4px solid #c6ddf2;
    }

    #aboutMeToggle:checked ~ header {
        display: none;
    }

    header li { display: inline; margin-left: -0.5em; }
    header .blurb li::after { content: '; '; }
    header  nav li {
        display: inline-block;
        margin-left: 0.35rem;
        margin-right: 0.35rem;
    }
    header .title {
        width: 100%;
    }
    main li .source { display: block; }

}</style>
    <style>
      .captioned-image { font-size: 0.9rem; }
      .thanksTo { font-style: italic; font-size: 0.8rem; }
    </style>
    <script>
      var activateOptional = function (media) {
        var source = media.getAttribute('data-src'),
            temp,
            container = media.parentElement;

          if (media.nextSibling && media.nextSibling.matches) {
            if (media.nextSibling.matches('.clickToSee')) {
              media.parentElement.removeChild(media.nextSibling);
            }
          }
 
          if (media.tagName === 'VIDEO') {
            temp = document.createElement('video')
            temp.setAttribute('autoplay','')
            temp.setAttribute('controls','')
            temp.setAttribute('loop','')
            temp.innerHTML = '<source src="' + source + '.webm" type="video/webm">'
                    + '<source src="' + source + '.mp4" type="video/mp4">';
            media.parentElement.replaceChild(temp, media);
            setTimeout(function () {
              temp.play()
            }, 0);
          } else {
            media.src = media.getAttribute('data-src');
          }

          container.classList.add('active');
      }
    </script>
  </head>
  <body>
    <input id="aboutMeToggle" class="sr-only" type="checkbox" checked="">
<label for="aboutMeToggle">Toggle author information</label>
<header>
    <div class="name">
        Brian Kardell
    </div>
    <img class="profile" src="/profile.jpg" alt="">
    <div class="tagline"><a href="/">Betterifying the Web</a></div>
    <div class="blurb">
        <ul>
            <li>Developer Advocate at Igalia</li>
            <li>Original Co-author/Co-signer of The Extensible Web Manifesto</li>
            <li>Co-Founder/Chair, W3C Extensible Web CG</li>
            <li>Member, W3C (The JS Foundation)</li>
            <li>Co-author of HitchJS</li>
            <li>Blogger</li>
            <li>Art, Science &amp; History Lover</li>
            <li>Standards Geek</li>
        </ul>
    </div>
    <div class="title">Follow Me On...</div>
    <nav>
        <ul>
            <li><a rel="me" href="https://briankardell.wordpress.com">Wordpress</a></li>
            <li><a rel="me" href="https://medium.com/@briankardell">Medium</a></li>
            <li><a rel="me" href="https://twitter.com/briankardell">Twitter</a></li>
            <li><a rel="me" href="https://github.com/bkardell/">Github</a></li>
            <li><a rel="me" href="https://codepen.io/bkardell">Codepen</a></li>
            <li><a rel="me" href="https://www.linkedin.com/in/brian-kardell-08a4264">LinkedIn</a></li>
            <li><a rel="me" href="https://www.instagram.com/kardellbrian">Instagram (for
art)</a></li>
            <li><a rel="me" href="http://fineartamerica.com/profiles/brian-kardell?">Fine Art
America (art for sale)</a></li>
        </ul>
    </nav>
</header>
    <main><div class="posted-on">Posted on null</div><article class="sectioning"> 
	<contextual-heading role="heading" aria-level="1">display: uhm</contextual-heading>
	<p class="segue">
		In which I talk about some stuff in the platform that I think is weird and centers around some unintuitive places.
	</p>
	<script src="../prism.js"></script>
    <link rel="stylesheet" href="../prism.css">
   
	<style>
    .note {
        background-color: rgba(255,255,0,0.24);
        padding: 1rem;
        font-style: italic;
    }
    .note::before {
        content: 'Note';
        font-size: 0.8rem;
        background-color: black;
        color: white;
        padding: 0.25rem;
        margin-right: 0.5rem;
    }
	</style>
		<p>
			Once upon a time, if you wanted something 'hidden' you would create a rule to do that.  Most of us used a class, and we'd have a rule something like:
		</p>
		<pre><code class="language-css">.hidden {
  display: none;
}
</code></pre>
		<p>
			You could have some content that matched that, like this:
		</p>
		<pre><code class="language-html">&lt;div class="hidden"&gt;
	Here's &lt;a href=".."&gt;an interesting thing&lt;/a&gt;
&lt;/div&gt;</code></pre>
		
	<p>
		From this, we can observe a few things: First, the element is visually hidden, sure.  Second, 
		it will cause us some pains if we decide to animate the showing of it.  That's not entirely intuitive.  Subtler though is that it also that isn't exposed to the accessibility tree, and that any interactive elements (like our link) inside it are neither focusable nor in sequential focus order (you can't reach them via the keyboard).
	</p>
	<p>
		Ok.  Well.. that makes sense, right?  That makes it easy for authors and it stands to reason that those are natural outflows of not actually painting a thing?
	</p>
	<p>
		In retrospect, I think, unfortunately no, and I think that continues to cause us a lot of grief.
	</p>

<section class="sectioning">
	<contextual-heading role="heading" aria-level="2">why it's weird</contextual-heading>
	<p>Consider that just about every accessible project has to define a class something like this:</p>

<pre><code class="language-css">.visually-hidden {
	display: block;
	position: absolute; 
	clip: rect(0,0,0,0); 
}
</code></pre>

	<p>
		This rule only affects visual display, something that is clearly in CSS's domain.  The stuff inside remains exposed to the accessibility tree, interactive elements inside remain focusable and in the tab order. Cool. 
	</p>
	<p>
		There is (currently) no UA stylesheet default way to express this, but everyone has one (or should).  This alone would suggest that it is not a "natural outflow", but is maybe instead just a good default?  Again, I think not and I think it adds confusion.
	</p>

	<p>
		Later, we codified an attribute in HTML called 'hidden'.  Based on all we preach, authors may think that that this actually <em>means</em> something, semantically about what we intend to happen where the visual painting is merely one aspect, and the rest is "all that other stuff that happens with focus and exposure to the accessibility true" 
	</p>

	<p>
		Because an author can simply override what that means, visually, with CSS.  That's how CSS works, it's entirely in CSS's domain, and that's fine.  One might attempt to override the visual nature of [hidden] as follows:
	</p>
	<pre><code class="language-css">[hidden] {
display: block;
position: absolute; 
clip: rect(0,0,0,0); 
}
</code></pre>
	<p>
		And reasonably expect that it should still carry it's functional/semantic "ness" with it.  That is, elements inside should not be exposed to the accessibility tree and interactive elements inside should not be focusable.  It is still 'hidden' in those regards.
	</p>
	<p>
		That seems reasonable, but that's not how it works.
	</p>
	<p>
	 	This is because <code>hidden</code> actually <em>achives</em> all of this magic simply through through CSS.  It is just a rule shipped in the UA stylesheet that assigns <code>display: none</code> to any element with that attribute. 
	 </p>
	 <p>
	 	It feels like (again, in retrospect) there are a number of unfortunate outflows here.  This seems to place things in weird places in the platform.  How things actually 'work' <em>appear</em> to be defined in your HTML, but actually they are defined in your CSS. Use cases like animations of these things which begin painted offscreen and simply animate in become harder to make accessible or can seem to <a href="https://discourse.wicg.io/t/what-s-the-standard-approach-for-un-hiding-elements-and-applying-css-transitions-to-them">require seemingly obscure knowlege of the platform</a> to get right.  
	 </p>
	 <p>
	 	Now consider that we also have a <code>tabindex</code> attribute/property which are about both the abilty to focus and whether things appear in sequential navigation, and <code>aria-hidden</code> which is about whether things are exposed in the accessibility tree.  In otherwords, these are semantic things you can manage in the DOM, but... They have no visual impact, and they are but inputs to how those values are treated in practice because at least some of that now depends on your CSS.
	 </p>
	 <p>
	 	If you desired to actually manage this all semantically and really separate style from that, you technically "could" but it would require juggling a whole bunch of things. You could override the meaning of [hidden] and manually control all the bits via managing <code>tabindex</code> and <code>aria-hidden</code>.
	 </p>
	 <section class="sectioning">
	 	<contextual-heading role="heading" aria-level="3">Enter: Inert</contextual-heading>
	 	<p>
	 		If you aren't familliar with <code>inert</code>, that's ok because I am going to tell you about what is is, and why I think it is great.
	 	</p>
	 	<p>  
	 		Effectively, the HTML specification has for some time described this concept of 'inertness'.  It describes, to some extent, the semantic bits described above that involve all of that "how it works" stuff which we currently gain mainly through some sort of magic/spooky action at a distance through <code>display: none</code>, only without the other unfortuante relationships and implications.
	 	</p>
	 	<p>
	 		Not long ago, we worked on taking that concept and making it it's own "thing" and allowing authors to plug into it the same way they can with <code>hidden</code>.
	 	</p>
	 	<p>
	 		In fact, in most places where you would previously have thought "hidden", you can sort of just mentally supplant it with "inert".  That's what you "mean".  You may also choose to hide it visually, or not.
	 	</p>
	 	<p>
	 		Why?  Well because "inertness" is a kind of complex functionaly idea and, it seems that all of those things being bound together just don't really work for a number of use cases, even "by default" so well.
	 	</p>
	 	<p>
	 		In many cases where the visualization <em>isn't</em> necessarily "not rendered", but could be "rendered offscreen" or "grayed out" (non-dialog bits of the page, when a dialog is shown) for example. 
	 	</p>
	 	<p>
	 		If I could go back in time, I would suggest that <code>display: none</code> should, effectively mean nothing more than what our <em>.visually-hidden</em> does - "theoretically rendered... somewhere, but not in the viewport", and that we add <code>inert</code> <em>instead</em> of <code>hidden</code>, and I feel like a whole lot of things would just get a lot simpler.
	 	</p>

	 	<p>
	 		Sadly, we can't.  But we can provide better future options where authors can just choose to not use those approaches, because there are better ones.  So, yay for inert.  It has lots of <a href="">positive signals</a>, is shipping behind a flag in Chrome, and <a href="https://github.com/WICG/inert">a good polyfill</a>.  If you're starting a project, check it out.
	 	</p>

	 </section>

 


</section></article></main>

  
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-88027178-1', 'auto');
    ga('send', 'pageview');
  </script>

  <script>
    Array.prototype.slice.call(document.querySelectorAll('.optional [data-src]')).forEach(function (optional) {
      var prefs = window.localStorage.downloadsPrefs,
          clickToSee;
      if (prefs === 'true') {
        activateOptional(optional);
      } else {
        clickToSee = document.createElement('div');
        clickToSee.classList.add('clickToSee')
        clickToSee.innerHTML = '<button>Click to see media</button>';
        clickToSee.style.textAlign = 'center';
        clickToSee.style.border = 'none';
        optional.parentElement.insertBefore(clickToSee, optional.nextSibling);
        clickToSee.firstElementChild.addEventListener('click', function () {
          activateOptional(optional);
        })
      }

    })
  </script>

</body></html>