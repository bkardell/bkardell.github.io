<html lang="en" resource-type="blogpost"><head>  
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@briankardell">
    <meta name="twitter:creator" content="@briankardell">
    <meta name="twitter:title" content="Reflecting on Roles">
    <meta name="twitter:description" content="Just a silly little experiment based on an observation...">
    
    <meta name="monetization" content="$ilp.uphold.com/kKU4GXiRwhnf ">

    <link rel="alternate" type="application/rss+xml" href="https://bkardell.com/blog/feed.rss" title="bkardell.com/blog rss feed">
    <title>Reflecting on Roles</title> 
    <style>.captioned-image {
    background-color: #eaeaea;
    display: block;
    overflow: hidden;
    padding: 1rem;
    text-align: center;
    font-style: italic;
}

.captioned-image.p-attached {
    width: 40%;
    display: inline-block;
    margin: 0 1rem 2rem 1rem;
}

section > .captioned-image.p-attached {
    margin-top: 1.5rem; /* correct for heading size*/
}

 pre { overflow-x: auto }

.captioned-image.p-attached.p-attached-left {
    float: left;
}

.captioned-image.p-attached.p-attached-right {
    float: right;
}

.captioned-image.p-attached + * + * {
    clear: both;
    margin-top: 2rem;
}


.captioned-image img, .captioned-image video {
    display: block;
    max-width: 100%;
    margin: 0 auto 1em auto;
}
.source {
    font-style: italic;
}
body {
    display: grid;
    grid-template-columns: 25rem auto;
    font: 1.1rem "Helvetica Neue", Helvetica, Arial, sans-serif;
    font-weight: 400;
    line-height: 1.625;
    margin: 0;
}
h1 { margin: 0.5rem; }
code-format {
    border-left: 0.5rem solid rgba(123,115,209,0.35);
    display: block;
    padding: 0.5rem;
    margin-bottom: 1rem;
}

contextual-heading {
    display: block;
    margin-top: 2rem;
}

h1, [aria-level="1"] {
    color: #43686b;
    font-size: 1.45rem;
}

h2, [aria-level="2"] {
    color: #856363;
    font-size: 1.35rem;
}

h3, [aria-level="3"] {
    color: #856363;
    font-size: 1.25rem;
}

h4, [aria-level="4"] {
    color: #856363;
    font-size: 1.2rem;
}

h5, h6, [aria-level="5"], [aria-level="6"] {
    color: #667496;
    font-size: 1.2rem;
    font-weight: bolder;
}

.posted-on {
    font-style: italic;
    font-size: 0.8rem; 
    text-align: right;
    margin-bottom: 1rem;
}

ul, li {
    margin: 0.5rem;
    text-align: left;
}

responsive-details {
    height: 100%;
    padding-top: 1rem;
    padding-right: 0;
    background-color: #fbf5e9; 
    display: block;
    background-image: linear-gradient(to right, #dde0e8 , #ffffff);
}

.tagline {
    font-style: italic;
    text-align: center;
}

[tag-esc] {
    color: maroon;
    font-family: Courier, "Lucida Console", monospace;
}

[tag-esc]::before {
    content: '<';
}

[tag-esc]::after {
    content: '>';
}

main {
    min-width: 50%;
    width: 80%;
    padding: 1rem;
}
header .title {
    background-color: rgba(123,115,209,0.35);
    padding: 0.3rem;
    padding-left: 0.25rem;
    font-weight: bolder;
    font-size: 1rem;
    border-left: 1rem solid #999298;
}

header .profile {
    width: 50%;
    margin: 1rem 25%;
}

header .title + nav {
    font-size: 0.9rem;
}

header .blurb {
    font-size: 0.9rem;
    text-align: center;
}
header .name {
    text-align: center;
    font-size: xx-large;
}
.segue {
    font-style: italic;
}
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0,0,0,0);
  border: 0;
}

#aboutMeToggle {
    display: none;
}

[for="aboutMeToggle"] {
    display: none;
}

main article { max-width: 100em; margin: auto; }
/* this needs rethinking, it wants a selector like 'not flow content' */
article>*:not(contextual-heading,a), section>*:not(contextual-heading,a) {
    margin-left: 0.45rem;
}

blockquote {
  font-family: serif;
  background: #f9f9f9;
  border-left: 10px solid #ccc;
  margin: 1.5em 10px;
  padding: 0.5em 10px;
}
blockquote:before {
  color: #ccc;
  content: open-quote;
  font-size: 2em;
  line-height: 0.1em;
  margin-right: 0.25em;
  vertical-align: -0.4em;
}

blockquote:after {
  color: #ccc;
  content: close-quote;
  font-size: 2em;
  line-height: 0.1em;
  margin-left: 0.25em;
  vertical-align: -0.4em;
}


@media (max-width: 800px){
    body {
        grid-template-columns: 1fr;
    }
    responsive-details {
        height: auto;
        border-bottom: 1px solid #afafff;
    } 

    main { width: 95%; margin: 0 auto;}

    .captioned-image.p-attached {
        width: 100%;
        margin: 1rem 0;
    }

    .captioned-image.p-attached.p-attached-left,
    .captioned-image.p-attached.p-attached-right {
        float: none;
    }

    #aboutMeToggle {
        display: block;
        background-color: #675e5e;
        color: white;
        padding: 0.25rem;
        padding-left: 0.5rem;
        border-left: 1rem solid black;
    }

    header li { display: inline; margin-left: -0.5em; }
    header .blurb li::after { content: '; '; }
    header  nav li {
        display: inline-block;
        margin-left: 0.35rem;
        margin-right: 0.35rem;
    }
    header .title {
        width: 100%;
    }
    main li .source { display: block; }

}</style>
    <style>
      .captioned-image { font-size: 0.9rem; }
      .thanksTo { font-style: italic; font-size: 0.8rem; }
    </style>
    <script>
      var activateOptional = function (media) {
        var source = media.getAttribute('data-src'),
            temp,
            container = media.parentElement;

          if (media.nextSibling && media.nextSibling.matches) {
            if (media.nextSibling.matches('.clickToSee')) {
              media.parentElement.removeChild(media.nextSibling);
            }
          }
 
          if (media.tagName === 'VIDEO') {
            temp = document.createElement('video')
            temp.setAttribute('autoplay','')
            temp.setAttribute('controls','')
            temp.setAttribute('loop','')
            temp.innerHTML = '<source src="' + source + '.webm" type="video/webm">'
                    + '<source src="' + source + '.mp4" type="video/mp4">';
            media.parentElement.replaceChild(temp, media);
            setTimeout(function () {
              temp.play()
            }, 0);
          } else {
            media.src = media.getAttribute('data-src');
          }

          container.classList.add('active');
      }
    </script>
  </head>
  <body>
    <script>
class ResponsiveDetails extends HTMLElement {
  
  checkForced() {
      let details = this.querySelector('details')
        if (this.mql.matches) {
          details.setAttribute('open','')
        } else {
          details.removeAttribute('open')
        }
  }
  connectedCallback() {
    this.mql = window.matchMedia(`(min-width: ${this.getAttribute("open-after") || "1px" })`);

    if (this.mql.addEventListener) {
        this.mql.addEventListener('change', () => {
            this.checkForced()
        })
    } else {
        this.mql.addListener(() => {
            this.checkForced()
        })
    }
    requestAnimationFrame(() => this.checkForced())
  }
  constructor() {
    super()
    this.attachShadow({mode: "open"})
    this.shadowRoot.innerHTML = `<slot></slot>`
    let slot = this.shadowRoot.firstElementChild;
    slot.addEventListener('slotchange', ()=> this.checkForced)          

  }
}                         

customElements.define('responsive-details', ResponsiveDetails)
</script>

<responsive-details open-after="800px">
<details open="">
<summary id="aboutMeToggle">Author Information</summary>

<header>
    <div class="name">
        Brian Kardell
    </div>
    <img class="profile" src="/profile.jpg" alt="">
    <div class="tagline"><a href="/">Betterifying the Web</a></div>
    <div class="blurb">
        <ul>
            <li>Developer Advocate at Igalia</li>
            <li>Original Co-author/Co-signer of The Extensible Web Manifesto</li>
            <li>Co-Founder/Chair, W3C Extensible Web CG</li>
            <li>Member, W3C (OpenJS Foundation)</li>
            <li>Co-author of HitchJS</li>
            <li>Blogger</li>
            <li>Art, Science &amp; History Lover</li>
            <li>Standards Geek</li>
        </ul>
    </div>
    <div class="title">Follow Me On...</div>
    <nav>
        <ul>
            <li><a rel="me" href="https://briankardell.wordpress.com">Wordpress</a></li>
            <li><a rel="me" href="https://medium.com/@briankardell">Medium</a></li>
            <li><a rel="me" href="https://twitter.com/briankardell">Twitter</a></li>
            <li><a rel="me" href="https://github.com/bkardell/">Github</a></li>
            <li><a rel="me" href="https://codepen.io/bkardell">Codepen</a></li>
            <li><a rel="me" href="https://www.linkedin.com/in/brian-kardell-08a4264">LinkedIn</a></li>
            <li><a rel="me" href="https://www.instagram.com/kardellbrian">Instagram (for
art)</a></li>
            <li><a rel="me" href="http://fineartamerica.com/profiles/brian-kardell?">Fine Art
America (art for sale)</a></li>
        </ul>
    </nav>
</header>
</details>
</responsive-details>
    <main><div class="posted-on">Posted on 04/25/2017</div><article posted-on="04/25/2017" class="sectioning">
    <script src="../role-reflect.js"></script>
    <style>
      	article { font-size: 1.1rem; }
		pre {
		  margin-left: 2rem;
		  white-space: pre;
		}

		[role=heading] {
		  color: rebeccapurple;
		}

		[role=button] {
		  background-color: #ccccff;
		  border-color: blue;
		  border-radius: 0.25rem;
		  display: inline;
		  border: 1px;
		  margin: 0.25rem;
		  padding: 0.5rem;
		  font-size: 0.8rem;
		  font-family: sans-serif;
		}

		[role=heading] + p::first-letter {
		  font-size: 2rem;
		}


    </style>
	<h1 class="contextual-heading">Reflecting on Roles</h1>
	<p class="segue">Just a silly little experiment based on an observation...</p>

	<p>So much of what we write is trying to classify and identify things so that we can 'talk about them'. This is true in designs and meetings as well as practically in code: CSS Selectors can be used by DOM, programatically, and by CSS declaratively to 'talk
	  about' something in terms of function or style.</p>

	<p>ARIA provides a way for you to explain to the browser that a thing <em>is</em> or <em>behaves as</em> something it can understand. For example, an element can have a <code>role=heading</code> or <code>role=button</code> and the browser will expose that
	  to AT appropriately. This works because native elements have <em>implicit roles</em> as defined <a href="https://www.w3.org/TR/html-aria/">ARIA in HTML</a> and ARIA defines a rich taxonomy for explaining these.</p>

	<p>Now, however, let's say we want to talk about headings, or buttons. For us, verbally, that's trivial. For AT, that's trivial. But in terms of CSS selectors, it's kind of a pain in the ass. Let's say that you want to style "the first letter of any paragraph
	  immediately following a heading" and you've got a number of approaches across your site(s). Traditionally, to write this, you'd have to write:

	  <code></code></p><pre><code>h1 + p::first-letter,
h2 + p::first-letter,
h3 + p::first-letter,
h4 + p::first-letter,
h5 + p::first-letter,
h6 + p::first-letter,
[role=heading] + p::first-letter { ... }</code></pre>

	  <p>Eventually, we'll be able to use the <code>:matches</code> to make this a little better: </p>

	  <code><pre>:matches(h1,h2,h3,h4,h5,h6,[role=heading]) + p::first-letter { ... }</pre></code>

	  <p>But.. that still isn't super great and that's kind of a trivial thing to want to express. The thing is, the browser <em>already knows</em> they're all headings, it's just invisible to us for many practical purposes. If they were exposed to us somehow,
	    we could write a simple rule like. </p>

	  <code><pre>[role=heading] + p::first-letter { ... }
	</pre></code>

	  <p><em>Note, the syntax there is debatable - practically speaking it would probably make more sense to use a pseudo-class like <code>:role(heading)</code> for this purpose.</em></p>

	  <p>It's not limited to headings either - the taxonomy is useful in a lot of ways. Take buttons for example. If you wanted to generically talk about the style of "things that are buttons" - traditionally you would have to write something like:</p>

	  <code><pre>button,
input[type=button],
input[type=submit],
input[type=reset],
summary,
[role="button"] { ... }</pre></code>

	  <p>But, again, the browser already knows that these are all "button", so it seems almost tragic that you can't just write something like:</p>


	  <code><pre>[role=button] {
  background-color: #ccccff;
  border-color: blue;
  border-radius: 0.25rem;
  display: inline;
  border: 1px;
  margin: 0.25rem;
  padding: 0.5rem;
  font-size: 0.8rem;
  font-family: sans-serif;
}</pre></code>

	  <p>and that would apply to.. you know.. all the buttons. And for buttons, we do a lot - we style the hover state and the focus state and so on.</p>

	  <p>Now... I think that maybe this matters more than just "it feels nicer to write" because the simple fact is that without something like this, the data seems to show that we resort to workarounds.  For example, the Bootstrap <code>.btn</code> class, which ultimately leads to lots of things that are not accessible, and <a href="https://bkardell.com/blog/Divs.html">ultimately just 'less'</a> in pursuit of something that is pretty easy for authors to express.</p>

	  <section>
	    <h2>So here's a thing...</h2>
	    <p>This is <a href="../role-reflect.js">a little script</a> written using mutation observers that you can include in the head of your document and it will expose the implicit roles defined <a href="https://www.w3.org/TR/html-aria/">ARIA in HTML</a>      (if there isn't a role already). While you might think that is 'heavy', it simply looking at the tag name, doing a lookup and potentially setting an attribute - not really terrible at all.</p>

	    <p>The point isn't "we should use this" it is simply to give authors kind of enough to play with things and see if it's totally nuts or potentially really helpful <em>for authors</em>. If not, then maybe a way to begin to discuss what that might mean
	      in terms of a real solution.</p>

	    <section>
	      <div role="heading" aria-level="3" style="font-size: 1.4rem;">Demo..</div>
	      <p>This page is, itself a demo. You can see lots of buttony things styled with a rule about buttons and headings all styled purple with rules just like the above...</p>
	      <button>Test button</button>
	      <input value="Test input" type="button">
	      <input type="submit">
	      <input type="reset">
	      <div role="button">Test ARIA Btn</div>
	    </section>

	  </section>

	  <section style="background-color: #e1e1f6; padding: 0.05rem 1rem 1rem; margin-top: 1rem; font-size: 0.9rem;" class="sectioning">
	  	<h2 class="contextual-heading">Post Script</h2>
	  	<p>While writing this I thought I recalled a nearly similar thing come up a few years back, and even reached out to some folks to see if I could find it, so I didn't mention it.  After posting, however, someone pointed me to it:  In 2013, James Craig requested <a href="https://www.w3.org/WAI/APA/track/issues/589">almost literally this</a>, which <em>just this last week</em> was moved to a <a href="https://github.com/w3c/css-a11y/issues/2">Github issue in the CSS A11Y Task Force repo</a> which somehow I was not following.  Great!</p>
	  	<p>Also, after I wrote this, my friend Michiel Bijl from TPG wrote a follow-up <a href="moiety.me/thinks/cascading-semantic-stylehooks.html">Cascading Semantic Stylehooks</a> as well.</p>
	  </section>



</article></main>

  
    

  <script>
    Array.prototype.slice.call(document.querySelectorAll('.optional [data-src]')).forEach(function (optional) {
      var prefs = window.localStorage.downloadsPrefs,
          clickToSee;
      if (prefs === 'true') {
        activateOptional(optional);
      } else {
        clickToSee = document.createElement('div');
        clickToSee.classList.add('clickToSee')
        clickToSee.innerHTML = '<button>Click to see media</button>';
        clickToSee.style.textAlign = 'center';
        clickToSee.style.border = 'none';
        optional.parentElement.insertBefore(clickToSee, optional.nextSibling);
        clickToSee.firstElementChild.addEventListener('click', function () {
          activateOptional(optional);
        })
      }

    })
  </script>

</body><!-- script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-88027178-1', 'auto');
    ga('send', 'pageview');
  </script --></html>