<html lang="en" resource-type="blogpost"><head>  
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="view-transition" content="same-origin"> 

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@briankardell">
    <meta name="twitter:creator" content="@briankardell">
    <meta name="twitter:title" content="2019, That's a Wrap.">
    <meta name="twitter:description" content="As 2019 draws to a close and we look toward a new year (a new decade, in fact) Igalians like to take a moment and look back on the year.  As it is my first year at Igalia, I am sub">
    <meta name="twitter:image" content="https://pbs.twimg.com/media/EJWhOZeUwAAicpP?format=jpg&amp;name=4096x4096">
    <!-- meta name="monetization" content="$ilp.uphold.com/kKU4GXiRwhnf " -->
    
    <link rel="alternate" type="application/rss+xml" href="https://bkardell.com/blog/feed.rss" title="bkardell.com/blog rss feed">
    <title>2019, That's a Wrap.</title> 
    <style>.captioned-image {
    background-color: #eaeaea;
    display: block;
    overflow: hidden;
    padding: 1rem;
    text-align: center;
    font-style: italic;
}

.captioned-image.p-attached {
    width: 40%;
    display: inline-block;
    margin: 0 1rem 2rem 1rem;
}

section > .captioned-image.p-attached {
    margin-top: 1.5rem; /* correct for heading size*/
}

 pre { overflow-x: auto }

.captioned-image.p-attached.p-attached-left {
    float: left;
}

.captioned-image.p-attached.p-attached-right {
    float: right;
}

.captioned-image.p-attached + * + * {
    clear: both;
    margin-top: 2rem;
}


.captioned-image img, .captioned-image video {
    display: block;
    max-width: 100%;
    margin: 0 auto 1em auto;
}
.source {
    font-style: italic;
}
body {
    display: grid;
    grid-template-columns: 25rem auto;
    font: 1.1rem "Helvetica Neue", Helvetica, Arial, sans-serif;
    font-weight: 400;
    line-height: 1.625;
    margin: 0;
}
h1 { margin: 0.5rem; }
code-format {
    border-left: 0.5rem solid rgba(123,115,209,0.35);
    display: block;
    padding: 0.5rem;
    margin-bottom: 1rem;
}

contextual-heading {
    display: block;
    margin-top: 2rem;
}

h1, [aria-level="1"] {
    color: #43686b;
    font-size: 1.45rem;
}

h2, [aria-level="2"] {
    color: #856363;
    font-size: 1.35rem;
}

h3, [aria-level="3"] {
    color: #856363;
    font-size: 1.25rem;
}

h4, [aria-level="4"] {
    color: #856363;
    font-size: 1.2rem;
}

h5, h6, [aria-level="5"], [aria-level="6"] {
    color: #667496;
    font-size: 1.2rem;
    font-weight: bolder;
}

.posted-on {
    font-style: italic;
    font-size: 0.8rem; 
    text-align: right;
    margin-bottom: 1rem;
}

ul, li {
    margin: 0.5rem;
    text-align: left;
}

.authorinfo {
    height: 100%;
    padding-top: 1rem;
    padding-right: 0;
    background-color: #fbf5e9; 
    display: block;
    background-image: linear-gradient(to right, #dde0e8 , #ffffff);
}

.tagline {
    font-style: italic;
    text-align: center;
}

[tag-esc] {
    color: maroon;
    font-family: Courier, "Lucida Console", monospace;
}

[tag-esc]::before {
    content: '<';
}

[tag-esc]::after {
    content: '>';
}

main {
    min-width: 50%;
    width: 80%;
    padding: 1rem;
}
header .title {
    background-color: rgba(123,115,209,0.35);
    padding: 0.3rem;
    padding-left: 0.25rem;
    font-weight: bolder;
    font-size: 1rem;
    border-left: 1rem solid #999298;
}

header .profile {
    width: 50%;
    margin: 1rem 25%;
}

header .title + nav {
    font-size: 0.9rem;
}

header .blurb {
    font-size: 0.9rem;
    text-align: center;
}
header .name {
    text-align: center;
    font-size: xx-large;
}
.segue {
    font-style: italic;
}
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0,0,0,0);
  border: 0;
}

#aboutMeToggle {
    display: none;
}

spicy-sections:not([affordance]) > h2 {
  clip: rect(0 0 0 0);
  clip-path: inset(50%);
  height: 1px;
  overflow: hidden;
  position: absolute;
  white-space: nowrap;
  width: 1px;
}

main article { max-width: 100em; margin: auto; }
/* this needs rethinking, it wants a selector like 'not flow content' */
article>*:not(contextual-heading,a), section>*:not(contextual-heading,a) {
    margin-left: 0.45rem;
}

blockquote {
  font-family: serif;
  background: #f9f9f9;
  border-left: 10px solid #ccc;
  margin: 1.5em 10px;
  padding: 0.5em 10px;
}
blockquote:before {
  color: #ccc;
  content: open-quote;
  font-size: 2em;
  line-height: 0.1em;
  margin-right: 0.25em;
  vertical-align: -0.4em;
}

blockquote:after {
  color: #ccc;
  content: close-quote;
  font-size: 2em;
  line-height: 0.1em;
  margin-left: 0.25em;
  vertical-align: -0.4em;
}
 

@media (max-width: 800px){
    body {
        grid-template-columns: 1fr;
    }
    .authorinfo {
        height: auto;
        border-bottom: 1px solid #afafff;
        padding-top:  0;
    } 

    main { width: 95%; margin: 0 auto;}

    .captioned-image.p-attached {
        width: 100%;
        margin: 1rem 0;
    }

    .captioned-image.p-attached.p-attached-left,
    .captioned-image.p-attached.p-attached-right {
        float: none;
    }

    #aboutMeToggle {
        display: block;
        background-color: #675e5e;
        color: white;
        padding: 0.25rem;
        padding-left: 0.5rem;
        border-left: 1rem solid black;
    }

    header li { display: inline; margin-left: -0.5em; }
    header .blurb li::after { content: '; '; }
    header  nav li {
        display: inline-block;
        margin-left: 0.35rem;
        margin-right: 0.35rem;
    }
    header .title {
        width: 100%;
    }
    main li .source { display: block; }

} 

spicy-sections {
    --const-mq-affordances:
      [screen and (min-width: 600px) ] collapse |
      [screen and (min-width: 801px) ] tab-bar
    ;
    display: block;
}

spicy-sections.authorinfo {
    --const-mq-affordances:
      [screen and (max-width: 801px) ] collapse
    ;
}


spicy-sections.single {
    --const-mq-affordances:
      [screen ] collapse 
;
}

[role="tab"] {
    margin-right:  1.5rem;
}

</style>
    <style> 
      .captioned-image { font-size: 0.9rem; }
      .thanksTo { font-style: italic; font-size: 0.8rem; }
    </style>
    <script>
      var activateOptional = function (media) {
        var source = media.getAttribute('data-src'),
            temp,
            container = media.parentElement;

          if (media.nextSibling && media.nextSibling.matches) {
            if (media.nextSibling.matches('.clickToSee')) {
              media.parentElement.removeChild(media.nextSibling);
            }
          }
 
          if (media.tagName === 'VIDEO') {
            temp = document.createElement('video')
            temp.setAttribute('autoplay','')
            temp.setAttribute('controls','')
            temp.setAttribute('loop','')
            temp.innerHTML = '<source src="' + source + '.webm" type="video/webm">'
                    + '<source src="' + source + '.mp4" type="video/mp4">';
            media.parentElement.replaceChild(temp, media);
            setTimeout(function () {
              temp.play()
            }, 0);
          } else {
            media.src = media.getAttribute('data-src');
          }

          container.classList.add('active');
      }
    </script>
  </head>
  <body>
    <spicy-sections class="authorinfo">
<h2 id="aboutMeToggle" defaults-on-match="">Author Information</h2>
  
<header>
    <div class="name">
        Brian Kardell
    </div>
    <img class="profile" src="/profile.jpg" alt="">
    <div class="tagline"><a href="/">Betterifying the Web</a></div>
    <div class="blurb">
        <ul>
            <li>Developer Advocate at Igalia</li>
            <li>Original Co-author/Co-signer of The Extensible Web Manifesto</li>
            <li>Co-Founder/Chair, W3C Extensible Web CG</li>
            <li>Member, W3C (OpenJS Foundation)</li>
            <li>Co-author of HitchJS</li>
            <li>Blogger</li>
            <li>Art, Science &amp; History Lover</li>
            <li>Standards Geek</li>
        </ul>
    </div>
    <div class="title">Follow Me On...</div>
    <nav>
        <ul>
            <li><a rel="me" href="https://briankardell.wordpress.com">Wordpress</a></li>
            <li><a rel="me" href="https://medium.com/@briankardell">Medium</a></li>
            <li><a rel="me" href="https://twitter.com/briankardell">Twitter</a></li>
            <li><a rel="me" href="https://github.com/bkardell/">Github</a></li>
            <li><a rel="me" href="https://toot.cafe/@bkardell">Mastodon</a></li>
            <li><a rel="me" href="https://bsky.app/profile/bkardell.com">Bluesky</a></li>
            <li><a rel="me" href="https://codepen.io/bkardell">Codepen</a></li>
            <li><a rel="me" href="https://www.linkedin.com/in/brian-kardell-08a4264">LinkedIn</a></li>
            <li><a rel="me" href="https://www.instagram.com/kardellbrian">Instagram (for
art)</a></li>
            <li><a rel="me" href="http://fineartamerica.com/profiles/brian-kardell?">Fine Art
America (art for sale)</a></li>
        </ul>
    </nav>
</header>
</spicy-sections>
<script>
  /*
    You're probably wondering "Do I need to write this?""
    "Is this part of it?"  No... If you're interested tho - 
    Custom elements have a FOUC/PE gap 
    (see https://github.com/whatwg/html/issues/6231).
    This is a slightly better experience: It 
    will be hidden _if JS is enabled_, and 
    will be shown as it is defined, 
    or after 1 sec, whichever is first.
  */
  let ss = document.createElement("style");

  ss.innerHTML = `html:not(.lldelay) :not(:defined) { visibility: hidden; }`;
  document.head.appendChild(ss);

  setTimeout(() => {
    document.documentElement.classList.add("lldelay");
  }, 1000);
</script>
    <main><div class="posted-on">Posted on 12/16/2019</div><article posted-on="12/16/2019" class="sectioning">
	<h1 class="contextual-heading">2019, That's a Wrap.</h1>
 
<p class="segue">As 2019 draws to a close and we look toward a new year (a new decade, in fact) Igalians like to take a moment and look back on the year.  As it is my first year at Igalia, I am substantially impressed by the long list of things we accomplished.  I thought it was worth, then, highlighting some of that work and putting it into context: What we did, how, and why I think this work is important the open web platform and to us all…</p>
<style> 
	.note {
        background-color: rgba(255,255,0,0.24);
        padding: 1rem;
        font-style: italic;
    }
    .note::before {
        content: 'Note';
        font-size: 0.8rem;
        background-color: black;
        color: white;
        padding: 0.25rem;
        margin-right: 0.5rem;
    }
    figcaption {
    	font-style: italic;
    	font-size: 0.8rem;
    }
    .twitter-tweet {
    	margin: 1rem auto;
    }
</style>

<section class="sectioning">
	<h2 class="contextual-heading">All the Browsers…</h2>

	<p>All of the browser projects are open source now and we are active and trusted committers to all of them.  That's important because browser diversity matters and we're able to  jump in and lend a hand wherever necessary.  The rate at which we contribute to any browser can vary from year to year for reasons (many explained in this post), but I'd like to illustrate what that actually <em>looked like</em> in 2019.  Let's look at the commits for 2019…</p>

	<p class="note">Commits are an imperfect kind of measure.  Not all commits are of the same value (in fact, value is hard to qualify here).  It doesn't account for potentially lots and lots of downstream work that went into getting one upstream commit.  Even figuring out how to count them can be tricky.  Looking at them purely as a vague relative scale of "how much did we do", they're one useful illustration.  That's how I'd like to you view these statisics - about our slice of the commit pie, and not anyone elses.</p>

	<section class="sectioning">
		<h3 class="contextual-heading">Chromium</h3>

		<p>During BlinkOn this year, you might have seen a number of mentions about our contributions to Chromium in 2019: We made the second most commits after Google this year.  </p>

		<figure>
		<img width="300" src="https://pbs.twimg.com/media/EJWhOZeUwAAicpP?format=jpg&amp;name=4096x4096" style="display:block;margin: 1rem auto;">
		<figcaption>Just one of the slides shared from Google’s presentation at blinkon 2019 showing 1782 commits from Igalia at that point in 2019…</figcaption>
		</figure>

		<p>Chromium, if you're not aware, is a <em>very</em> large and busy project with lots of big company contributors, so it's quite exciting to show the level at which we are contributing here. (Speaking of imperfections in this measure - all of our MathML work was done downstream and thus commits toward this very significant project aren't even counted here!)</p>
	</section>
	<section class="sectioning">
		<h3 class="contextual-heading">Mozilla</h3>

		<p>This year, our contributions to Mozilla projects were  relatively small by comparison.  Nevertheless, 9 Igalians still actively contributed over 160 commits to servo and mozilla-central in 2019 placing us in the top 10 contributors to servo and the top 20 to mozilla-central.</p>

		<figure>
		<img width="300" src="/media/2019-contributions-to-servo.png" style="display:block;width: 100%;">
		<figcaption>A little over 1% of contributions to Servo were by Igalians in 2019 (over 3.4% of non-Mozillan commits).</figcaption>
		</figure>

		<p>As an aside, it's pretty great to see that the #1 committer to mozilla-central this year is our friend Emilio Cobos (by a wide margin, over 2-to-1).  Emilio completed an Igalia Coding Experience in 2017… and gave a great talk at least years Web Engines Hackfest.  Congratulations Emilio!</p>
	</section>
	<section class="sectioning">
		<h3 class="contextual-heading">WebKit</h3>

		<p>Very importantly: We are also the #2 contributor to WebKit.  In 2019 37 Igalians made over 1100 commits to WebKit this year, delivering ~11% of the total commits.</p>

		<figure>
		<img width="300" src="/media/webkit-contributions-2019.png" style="display:block;width: 100%;">
		<figcaption>Almost 11% of all commits to WebKit in 2019 were from Igalians.</figcaption>
		</figure>

		<p>In fact, if we zoom out and look at what that looks like <em>without</em> Apple, our level of committment is even more evident…</p>

		<figure>
		<img width="300" src="/media/webkit-contributions-2019-sans-apple.png" style="display:block;width: 100%;">
		<figcaption>60% of all non-Apple commits to WebKit in 2019 were from Igalians.</figcaption>
		</figure>

		<p>I think this is important because there's a larger, untold story here which I look forward to talking more about next year.  In short though: While you might think of WebKit as “Apple”, the truth is that there are a number of companies invested and interested in keeping WebKit alive and increasingly competitive, and Igalia is key among them.  Why? Because 3 of the 5 downloads available from webkit.org are actually maintained by Igalia.  These WebKit browsers are used on <em>hundreds of millions of devices</em> already, and that's growing.  Chances are even pretty good that you've encountered one, maybe even have one, and just didn't even know it.  </p>
	</section>
	<section class="sectioning">
		<h3 class="contextual-heading">A Unique Role…</h3>

		<p>As I explained in my post earlier this year <a href="https://bkardell.com/blog/Beyond.html">Beyond Browser Vendors</a>: Igalia does this work by uniquely expanding the ability to prioritize work and allowing us all to better collectively improve the commons and share the load.</p>

		<p>Bloomberg, as you might know, funded the development of CSS Grid.  In 2019 they continue to fund a lot great efforts in both JavaScript and CSS standardization and implementation. To name just a few in 2019:  In CSS they funded some paint optimizations, development of <code>white-space: break-spaces</code>, <code>line-break: anywhere</code>, <code>overflow-wrap: anywhere</code>, <code>::marker</code> and <code>list-style-type: &lt;string&gt;</code>.  In JavaScript, <code>BigInt</code>, Public and Private Class Fields, Decorators and Records and Tuples.</p>

		<p>But they weren't remotely alone: 2019 saw many diverse clients funding some kind of upstream work for all sorts of reasons.  Google AMP, as another example, funded a lot of great work in our partnership for Predictability efforts.  Several sponsors helped fund work on MathML.  Our work with embedded browsers has helped introduce a number of new paths for contributions as well.  We worked on Internationalization, accessibility, module loading, top-level-await, a proposal for operator overloading and more.</p>

		<p>I'm also very proud of fact that we are an example of what we preach in this respect:<em>  Among those who sponsor our work is… us.</em> Igalia cares about doing things that matter, and while we are great at finding ways to help fund the advancement of work that matters, we're also willing to invest ourselves.</p>
	</section>
 
	<section class="sectioning">
		<h3 class="contextual-heading">So, what matters?</h3>

		<p>Lots of things matter to Igalia, here are a few broad technical areas that we priortized in 2019…</p>

		<section class="sectioning">
			<h4 class="contextual-heading">Predictability</h4>

			<p>This year MDN organized a giant survey which turned up a lot of interesting findings about what things caused developers pain, or that they would like to see improved.  Several of these had to do with uneven, inconsistent (buggy) or lacking implementations of standards.</p>

			<p>Thanks to lots of clients, and some of our own  investment, we were able to help here in a big way.  This year we were able to resolve a number of incompatibilities, fix bugs, create a lot of tests, and fix bugs that cause a lot of developer pain.
			<a href="https://blog.amp.dev/2019/12/16/our-2019-contributions-to-web-platform-interoperability/">AMP, notably, has sponsored a lot of these important things in partnership with us</a>, even funding 'last implementations' of important missing features to WebKit like <code>ResizeObserver</code> and preloading for responsive images. </p>

			<p>In 2019, 20 Igalians made 343 commits to Web Platform Tests, adding thousands of new tests and placing us among the top few contributors..</p>

			<figure>
			<img width="300" src="/media/2019-contributions-to-WPT.png" style="display:block;width: 100%;">
			<figcaption>In 2019, Igalia was the #3 contributor to Web Platform Tests, after Google and Mozilla.</figcaption>
			</figure>

			<p>We were also among the top contributors to Test262 as well… Great contributions here from our friends at Bocoup!  We are two very unique companies in this space - contributing to the open web with a different kind of background than most. It's excellent to see how much we're all accomplishing together - just between the two of us, that's approaching 60% of the commits!</p>
			<figure>
			<img width="300" src="/media/2019-contributions-to-test262.png" style="display:block;width: 100%;">
			<figcaption>We're among the top contributors to Test262 as well.</figcaption>
			</figure>
		</section>
		<section class="sectioning">
			<h4 class="contextual-heading">Acccessibility</h4>

			<p>“Accessibility is very important to us” might sound like a nice thing to say, but at Igalia it's <em>very</em> true.  We are probably accessibility on Linux's greatest champions.  Here's what Igalia brought to the table in 2019:</p>

			<p>As the maintainers of the Orca screen reader for the Gnome desktop we did an enormous amount of work this year with over 460 commits (over 83%) in 2019 to Orca itself.  </p>

			<figure>
			<img width="300" src="/media/2019-contributions-to-orca.png" style="display:block;width: 100%;">
			<figcaption>Over 83% of all commits to Orca in 2019 were from Igalians.</figcaption>
			</figure>

			<p>We were also active contributors for lots of the underlying parts (at-spi2-atk, at-spi2-core).  And, thanks to investment from Google, we were also able to properly implement ATK support in Chromium, making Chrome for Linux now very accessible with a screen reader.  We also actively contributed to Accerciser, a popular Python based interactive accessibility explorer.</p>
		</section>
		<section class="sectioning">
			<h4 class="contextual-heading">Standards</h4>

			<p>Of course, all of our implentation work is predicated on open <em>standards</em>, and we care deeply about them, and I'm proud of our participation.  Here are a few highlights from 2019:</p>

			<p>Igalia's <a href="https://www.igalia.com/igalian/jdiggs">Joanmarie Diggs</a> is the chair the ARIA Working Group, and co-editor of several of its related specifications.  Igalia had the second most commits to the ARIA specification itself - almost 20% in 2019 behind only Adobe (well done Adobe!). </p>

			<figure>
			<img width="300" src="/media/2019-contributions-to-ARIA.png" style="display:block;width: 100%;">
			<figcaption>Almost 1/5th of contributions to ARIA came from Igalians in 2019.</figcaption>
			</figure>

			<p>We were also the top 3 contributor to the <a href="https://w3c.github.io/html-aam/">HTML Accessibility API Mappings 1.0</a> and actively contributed to <a href="https://w3c.github.io/accname/">Accessible Name and Description Computation</a>.  </p>

			<p>This year, during the CSS Working Group's Face-to-Face meeting at the Mozilla offices in Toronto, our colleage <a href="https://www.igalia.com/igalian/obrufau">Oriol Brufau</a> was unanimously, and quickly appointed as co-editor of the CSS Grid Specification.</p>

			<p>2019 also saw the hiring of Nikolas Zimmerman, <a href="https://twitter.com/briankardell/status/1185278473931231232">bringing the original authors of KSVG</a> (the original SVG implementation) back together at Igalia.  We've nominated Niko to the SVG working group and we we're so excited to share what he's working on (see end of post):</p>


		</section>
		<section class="sectioning">
			<h4 class="contextual-heading">Math on the Web</h4>

			<p>Enabling authors to share text was an original goal of the Web.  That math was an important aspect of this was evident from the very earliest days at CERN, however, because of a complex history and lacking implementation in Chromium, this remained elusive and without a starting point for productive conversation.  We believe that this matters to society, and resolving and enabling a way to move forward it is the right thing to do.</p>

			<p>With some initial funding from sponsors,  this year we also helped to steadily advance and define an interoperable, modern and rigorous <a href="https://mathml-refresh.github.io/mathml-core">MathML Core</a> specification which is well integrated with the Web Platform to provide a starting point. Igalia's Fred Wang is the co-editor of MathML Core, and we've implemented alongside and completed an initial implementation thanks to lots of hard work from Rob Buis and Fred, and worked to write tests and align high quality interoperability.</p>


			<figure>
			<img width="300" src="/media/mathml-implementations-2019.png" style="display:block;width: 100%;">
			<figcaption>Modern interoperabilty and high quality rendering by July 2019.</figcaption>
			</figure> 

			<p>We filed the <a href="https://groups.google.com/a/chromium.org/forum/m/?utm_medium=email&amp;utm_source=footer#!msg/blink-dev/OOZIrtSPLeM/QsTCnouFDgAJ">Intent to Implement</a> and began the process of upstreaming.  As part of this, we have also created a corresponding <a href="https://github.com/mathml-refresh/mathml-core/blob/master/docs/explainer.md">explainer</a> and filed for a <a href="https://github.com/w3ctag/design-reviews/issues/438">review with the W3C Technical Architecture Group (TAG)</a>.  We've seen positive movement and feedback and several patches have already begun to land upstream toward this long, <a href="https://bugs.chromium.org/p/chromium/issues/detail?id=6606#c84">popular and overdue issue</a>.  Thanks to our work, we will soon be able to say (interoperably), that the Web can handle original use cases <a href="https://www.w3.org/MarkUp/HTMLPlus/htmlplus_45.html">defined at CERN in the early 1990s</a>.</p>
		</section>
		<section class="sectioning">
			<h4 class="contextual-heading">Outreach and Community</h4>

			<p>Standards are a complex process and we believe that enabling good standardization requires input from a considerably larger audience than is historically able to engage in standards meetings.  Bringing diverse parts of the community together is important.  This has historically been quite a challenge to achieve.  As such, we've been doing a lot in this space.  </p>

			<ul>
			<li><p>Each year we organize an annual Web Engines Hackfest and bring together attendees from all over the world with varying interests around browsers and Web standards come together.  Last October we held this event at our offices in A Coruña Spain.  There were many <a href="https://www.youtube.com/playlist?list=PL4sEzdAGvRgDCN6qACHWs04mQQTWBkdGq">great talks</a> and a lot of great collaboration and discussion.  </p></li>
			<li><p>We began a number of JavaScript outreach groups with different stakeholders.  We meet with each monthly, review and discuss what's happened recently or is brewing new in TC39 and related standards <a href="https://github.com/js-outreach/js-outreach-groups">see </a>.  One of these efforts has also spawned a new effort <a href="https://twitter.com/StandardsIn2Min">Standards in 2 Minutes</a> to allow developers to more easily stay in touch.</p></li>
			<li><p>We joined in partnership on a new effort <a href="https://webwewant.fyi">WebWeWant.fyi</a> which aims to do more direct outreach from standards right to developers, where they are with regard to creating useful feedback into the system.</p></li>
			<li><p>We partnered with colleagues at Bocoup to contribute the research, writing and tooling for the <a href="https://almanac.httparchive.org/en/2019/markup">2019 Web Almanac's chapter on Markup</a>, including for the first time data about non-standard and custom elements with an eye toward answering the question “What new cow paths are being laid down that HTML should consider standardizing”.</p></li>
			<li><p>We began outreach to publishing, design and editorial communities within the W3C and have been connecting discussions with browser vendors on how to move a whole lot of exciting things forward.</p></li>
			<li><p>We gave a lot of talks and participated in a lot of events, here are just a few that there are videos of…</p>

			<ul>
			<li>
			<a href="https://www.youtube.com/watch?v=C1JcKq3NzWU" rel="nofollow noreferrer noopener" target="_blank">Grid Implementation Details</a> by Manuel Rego at CSS Day</li>
			<li><a href="https://www.youtube.com/watch?v=GLi37QPSOv4&amp;list=PLe9psSNJBf74yYiVXDXz8UnRnWf3NHzS-">Standardizing JavaScript Decorators in TC39</a> by Dan Ehrenberg
			</li>
			<li>
			<a href="https://youtu.be/Q8Z1D2i61j8" rel="nofollow noreferrer noopener" target="_blank">MathML in Browsers</a> by Frédéric Wang at Web Engines Hackfest</li>
			<li><a href="https://www.youtube.com/watch?v=ceiUozUFF3Y">Web APIs in Node.js Core: Past, Present, and Future</a> at JSConf EU by Joyee Chung</li>
			<li><a href="https://www.youtube.com/watch?v=Rc2TpO7WXYc&amp;t=486s">JavaScript Class Features: A case study in TC39</a> by Dan Ehrenberg</li>
			<li>
			<a href="https://youtu.be/Rc2TpO7WXYc rel=" nofollow="" noreferrer="" noopener"="" target="_blank">Improving Website Performance with CSS Containment</a> by Manuel Rego at CSSconf EU</li>
			<li><a href="https://www.youtube.com/watch?v=gS3wLIoQAAY&amp;feature=youtu.be" noreferrer="" noopener="" target="_blank">The Battle of the Event Loops</a> by Ujjwal Sharma at HolyJS</li>
			<!--li>
			<a href="https://slides.com/briankardell/60-21-22-23#/" rel="nofollow noreferrer noopener" target="_blank">The Web Commons:Past, Present and Future</a> by <em>brian</em>. Abstractions II</li -->
			<li>
			<a href="https://www.youtube.com/watch?v=AqzztIpGCD8" rel="nofollow noreferrer noopener" target="_blank">Implementing Accessibility for the Web Platform</a> by Martin Robinson at Web Engines Hackfest</li>
			<li><a href="https://www.youtube.com/watch?v=olSQai4EUD8">This.Javascript: State of Browsers panel, representing WebKit</a>, several TC39 panels like <a href="https://www.youtube.com/watch?v=m8KfqLPgi_w">this one from JSConf EU</a>, some podcasts, like <a href="https://www.youtube.com/watch?v=weVNrflT-vU">Talkscript</a> and started doing some <a href="https://www.youtube.com/watch?v=dw6QDmH7Sgs">interviews of our own.</a></li>
			</ul>

			</li><li>
				<p>We wrote a lot of blog posts  too, here are a few I chose to highlight here that I thought were particularly interesting:</p>
				<ul>
					

			<li>
			<a href="https://blogs.igalia.com/mrego/2019/06/19/speaking-at-css-day-2019/" rel="nofollow noreferrer noopener" target="_blank">Speaking at CSS Day 2019</a> (a post about what it takes to implement and ship a new feature) by Manuel Rego</li>

			<li>
			<a href="https://bkardell.com/blog/OnePlatform.html" rel="nofollow noreferrer noopener" target="_blank">One Platform</a> (a post about resolving historical co-evolutionary oddities in the platform so we can more forward) by <em>Brian Kardell</em>
			</li>


			<li>
			<a href="https://blogs.igalia.com/jfernandez/2019/06/10/a-new-terminal-style-line-breaking-with-css-text/" rel="nofollow noreferrer noopener" target="_blank">A terminal-style line breaking with CSS Text</a> by javif</li>


			<li>
			<a href="https://blogs.igalia.com/mrego/2019/01/11/an-introduction-to-css-containment/" rel="nofollow noreferrer noopener" target="_blank">An introduction to CSS Containment</a> by rego</li>

			<li>
			<a href="https://bkardell.com/blog/Beyond.html" rel="nofollow noreferrer noopener" target="_blank">Beyond Browser Vendors</a> (a post the not-often discussed reasons why we get the features that we do, and the changing landscape that enabled new ideas) by <em>Brian Kardell</em>
			</li>

			<!-- li>
			<a href="https://docs.google.com/document/d/1DpwvJsDhMc32UGxxKVo1hGlaYLGwPWIVi37o8nt-pH0" rel="nofollow noreferrer noopener" target="_blank">Google AMP (a review)</a> by cathie, fred and rob</li -->

				</ul>
			</li>

			</ul>
			
		</section>
	</section>
	<section class="sectioning">
		<h3 class="contextual-heading">2020…</h3>
		<p>So, I think we did some amazing and important things in 2019.  But, as amazing as it was: <em>Just wait until you see what we do 2020</em>. </p>

		<p>In fact, we're excited about so many things, we couldn't even wait to give you a taste...</p>


		<blockquote class="twitter-tweet"><p lang="en" dir="ltr">I just published an article about my first large project <a href="https://twitter.com/igalia?ref_src=twsrc%5Etfw">@igalia</a> on my blog: enabling CSS 3D transformations in <a href="https://twitter.com/webkit?ref_src=twsrc%5Etfw">@webkit</a> SVG. I am looking forward to your comments - checkout <a href="https://t.co/SMWXnY5Iwv">https://t.co/SMWXnY5Iwv</a>.<br><br>I am excited :-)</p>— Nikolas Zimmermann (@NikolasZimmerm1) <a href="https://twitter.com/NikolasZimmerm1/status/1205136265835888640?ref_src=twsrc%5Etfw">December 12, 2019</a></blockquote> <script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
	</section>
</section>
</article></main>
 
   
  <script>
    //import { MediaAffordancesElement } from "./MediaAffordancesElement.js";
    class MediaAffordancesElement extends HTMLElement {
      constructor() {
        super();
        // todo: this should be a private field
        this.__matching = new Set()
        this.mqls = [];
        this.observers = [];

        this.supportedAffordances = new Set();
      }

      observeAffordanceChange(cb) {
        this.observers.push(cb);
      }

      notifyChange() {
        let intersection = new Set();
        for (let elem of this.__matching) {
          if (this.supportedAffordances.has(elem)) {
            intersection.add(elem);
          }
        }

        if (this.__matching.size > 0) {
          this.setAttribute("mq-matched", [...this.__matching].join(" "));
        } else {
          this.removeAttribute("mq-matched");
        }
        let arr =  [...intersection]
        let affordance = arr[arr.length - 1];
        if (affordance) {
          this.setAttribute("affordance", affordance);
        } else {
          this.removeAttribute("affordance");
        }
        this.observers.forEach(cb => {
          cb(intersection, this.__matching);
        });
      }

      static get observedAttributes() {
        return ["mq-affordances"];
      }

      connectedCallback() {
        let newValue = getComputedStyle(this).getPropertyValue(
          "--const-mq-affordances"
        );
        this.connectListeners(newValue);
      }

      connectListeners(newValue = "") {
        if (newValue.trim().length === 0) {
          return;
        }
        
        newValue.split("|").forEach(segment => {
          let mq = segment.trim().match(/\[([^\]]*)/)[1];
          let names = segment
            .replace(`[${mq}]`, "")
            .trim()
            .split(" ");
          let mql = window.matchMedia(mq);
          let mqh = evt => {
            names.forEach(name => {
              this.__matching[mql.matches ? "add" : "delete"](name);
            });

            this.notifyChange();
          };
          mqh();
          mql.addEventListener("change", mqh);
          this.mqls.push(mql);
        }, this);
      }

      attributeChangedCallback(name, oldValue, newValue) {
        this.connectListeners(newValue);
      }
    }

    //-----------------------------------------------------

    (function() {
      let lastUId = 0;
      let nextUId = () => {
        return `cp${++lastUId}`;
      };

      let getLabels = regionset => {
        return [...regionset.children].filter(el => /^H\d$/.test(el.tagName));
      };

      let getContentEls = regionset => {
        return [...regionset.children].filter(el => !/^H\d$/.test(el.tagName));
      };

      let ensureId = el => {
        el.id = el.id || nextUId();
        return el.id;
      };

      let getDisclosureButton = label => {
        return label.shadowRoot.querySelector("button");
      };

     
      let style = document.createElement('style')
      style.innerHTML = `
          
        :where(spicy-sections > [affordance*="collapse"])::before { 
          content: ' ';
          display: inline-block;
          width: 0.5em;
          height: 0.75em;
          margin: 0 0.4em 0 0;
          transform: rotate(90deg);
          background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' width='10px' height='10px' viewBox='0 0 270 240' enable-background='new 0 0 270 240' xml:space='preserve'%3e%3cpolygon fill='black' points='5,235 135,10 265,235 '/%3e%3c/svg%3e ");
          background-size: 100% 100%;
        } 

        :where(spicy-sections > [affordance*="collapse"][aria-expanded="true"])::before, 
        :where(spicy-sections > [affordance*="collapse"][aria-expanded="true"])::after {
          transform: rotate(180deg);
        }
      `
      document.head.prepend(style)
      
      const template = `
            <style>
              :root {
                font-size: 1rem;
              }

              :host([hidden]),
              ::slotted([hidden]) {
                display: none;
              }
              
              ::slotted(h1),
              ::slotted(h2),
              ::slotted(h3),
              ::slotted(h4),
              ::slotted(h5),
              ::slotted(h6) {
                 margin-right: 1rem;
              }
              
              tab-bar ::slotted([tabindex="0"]) {
                border-bottom: 1px solid blue;
              }
              
              tab-list { 
                display: flex; 
                overflow: hidden;
                white-space: nowrap;
              }
            </style>
            <tab-bar part="tab-bar">
              <!-- The region/tablist should have a  label -->
              <tab-list part="tab-list" role="tablist"
              ><slot name="tabListSlot"></slot></tab-list>
            </tab-bar>
            <content part="content-panels">
              <slot default></slot>
            </content>
        `;

      class RegionSet extends MediaAffordancesElement {
        __defaults;
        __tabListEl;

        // tabs and exclusive collapses should have the same affordance object?
        __affordanceConf = {
          collapse: {
            // can take a condition to force, check-like
            toggle: (label, condition) => {
              let state =
                typeof condition === "boolean"
                  ? condition
                  : !label.affordanceState.expanded;
              let contentEl = label.nextElementSibling;
              label.affordanceState.expanded = state;
              label.affordanceState.nonExclusiveExpanded = state;
              label.setAttribute("aria-expanded", state);
              if (state) {
                label.setAttribute("expanded", "");
                contentEl.style.display = "block";
              } else {
                label.removeAttribute("expanded");
                contentEl.style.display = "none";
              }
            }
          },
          "exclusive-collapse": {
            // ignores condition, radio-like
            toggle: label => {
              let labels = getLabels(label.parentElement);
              let siblings = labels.filter(c => c !== label);
              let index = labels.findIndex(c => c === label);

              siblings.forEach((sibLabel, i) => {
                let relatedContent = sibLabel.nextElementSibling;
                sibLabel.tabIndex = -1;
                relatedContent.style.display = "none";
                label.setAttribute("aria-expanded", "false");
                sibLabel.affordanceState.exclusiveExpanded = false;
              });
              label.tabIndex = 0;
              //nope - todo, fix/remove this?
              label.parentElement.affordanceState.exclusiveSelection.index = index;
              label.nextElementSibling.style.display = "block";
              label.setAttribute("aria-expanded", "true");
              label.affordanceState.exclusiveExpanded = true;
              label.focus();
            }
          },
          "tab-bar": {
            // ignores condition, radio-like
            toggle: label => {
              let labels = getLabels(label.parentElement);
              let siblings = labels.filter(c => c !== label);
              let index = labels.findIndex(c => c === label);

              siblings.forEach((sibLabel, i) => {
                let relatedContent = sibLabel.nextElementSibling;
                sibLabel.tabIndex = -1;
                relatedContent.style.display = "none";
                sibLabel.setAttribute("aria-expanded", "false");
                sibLabel.affordanceState.exclusiveExpanded = false;
              });
              label.tabIndex = 0;
              label.parentElement.affordanceState.exclusiveSelection.index = index;
              label.nextElementSibling.style.display = "block";
              label.setAttribute("aria-expanded", "true");
              label.affordanceState.exclusiveExpanded = true;
              label.focus();
            }
          }
        };
        __setSize = (labelEls, contentEls) => {
          this.__size = Math.min(labelEls.length, contentEls.length);

          if (labelEls.length !== this.__size) {
            console.warn("mismatch in tab-set label/content pairs...");
          }

          labelEls.forEach((labelEl, i) => {
            let contentEl = contentEls[i];
            if (!labelEl.initialized) {
              labelEl.initialized = true; // todo: this used to be shadow, do i need it?
              let defs = this.__defaults.defaultActive;

              // this assumes it is about collapses
              labelEl.affordanceState = {
                expanded: defs.includes(labelEl),
                active: false,
                // activate in the current mode
                activate: () => {
                  if (this.affordanceState.current) {
                    this.__affordanceConf[this.affordanceState.current].toggle(
                      labelEl
                    );
                  }
                }
              };

              let defaultExclusive =
                defs.length === 0 ? labelEls[0] : defs[defs.length - 1];

              this.affordanceState.exclusiveSelection.index = labelEls.indexOf(
                defaultExclusive
              );
            }
            labelEl.setMode = mode => {
              if (mode === "non-exclusive") {
                let isExpanded = labelEl.affordanceState.expanded;
                labelEl.setAttribute("affordance", "collapse");
                labelEl.setAttribute("tabindex", "0");
                labelEl.setAttribute("aria-controls", contentEl.id);
                labelEl.setAttribute("role", "button");
                labelEl.setAttribute("aria-expanded", isExpanded);
                labelEl.nextElementSibling.style.display = isExpanded
                  ? "block"
                  : "none";
              } else if (mode === "exclusive") {
                let isExpanded =
                  labelEls.indexOf(labelEl) ===
                  this.affordanceState.exclusiveSelection.index;
                labelEl.setAttribute("affordance", "collapse");
                labelEl.setAttribute("tabindex", isExpanded ? 0 : -1);
                labelEl.setAttribute("role", "button");
                labelEl.setAttribute("aria-expanded", isExpanded);
                labelEl.setAttribute("aria-controls", contentEl.id);
                labelEl.nextElementSibling.style.display = isExpanded
                  ? "block"
                  : "none";
              } else {
                labelEl.removeAttribute("tabIndex");
                labelEl.removeAttribute("affordance");
                labelEl.removeAttribute("aria-expanded");
                labelEl.removeAttribute("role");
              }
            };
          });
        };

        __projectTabBar = () => {
          this.__removeProjections();
          getLabels(this).forEach((tabSource, i) => {
            let selected = false,
              tabIndex = -1,
              display = "none";

            tabSource.setMode();
            tabSource.slot = "tabListSlot";
            tabSource.setAttribute("role", "tab");
            let tabId = ensureId(tabSource);
            let contentSource = tabSource.nextElementSibling;
            contentSource.tabIndex = 0;
            tabSource.setAttribute("aria-controls", ensureId(contentSource));
            contentSource.setAttribute("role", "tabpanel");
            contentSource.setAttribute("aria-labelledby", tabSource.id);
            if (i === this.affordanceState.exclusiveSelection.index) {
              tabIndex = 0;
              selected = true;
              display = "block";
            }
            tabSource.setAttribute("aria-selected", selected);
            tabSource.tabIndex = tabIndex;
            contentSource.style.display = display;

            // TODO: aria-orientation :(
          });
        };

        __projectCollapses = exclusive => {
          // TODO - remove projections and... ??
          this.__removeProjections();
          getLabels(this).forEach(label => {
            label.setMode(exclusive ? "exclusive" : "non-exclusive");
          });
        };

        __removeProjections = () => {
          [...this.children].forEach(child => {
            child.removeAttribute("slot");
            child.removeAttribute("affordance")
            child.removeAttribute("role");
            child.removeAttribute("aria-selected");
            child.removeAttribute("aria-controls");
            child.removeAttribute("tabindex");
            child.removeAttribute("aria-expanded")
            child.style.display = "block";
          });
        };

        // matching pairs
        __size = 0;

        __configure = () => {
          ///hmmm

          this.__setSize(getLabels(this), getContentEls(this));

          if (this.affordanceState.current === "tab-bar") {
            this.affordanceState.currentMode = "exclusive";
            this.__projectTabBar();
          } else if (this.affordanceState.current === "collapse") {
            this.affordanceState.currentMode = "non-exclusive";
            this.__projectCollapses();
          } else if (this.affordanceState.current === "exclusive-collapse") {
            this.affordanceState.currentMode = "exclusive";
            this.__projectCollapses(true);
          } else {
            this.affordanceState.currentMode = undefined;
            this.__removeProjections();
          }

          let specifiedIndex = this.activeTabIndex || 0;
          // TODO: hmm, these are DOM changes, we could cache them
          let labelEls = getLabels(this);
          let contentEls = getContentEls(this);

          for (let i = 0; i < this.__size; i++) {
            let label = labelEls[i];
            // probably add one handler that decides
            if (!label._inited) {
              label.addEventListener("click", evt => {
                evt.target.affordanceState.activate();
              });
              label._inited = true;
            }
          }
        };
        
        __childListObserver = new MutationObserver(mutationList => {
          // we have to wire up new elements
          let labelEls = getLabels(this);
          let contentEls = getContentEls(this);

          // what if there is a mismatch?
          this.__setSize(labelEls, contentEls);
          this.__configure();
        });

        __tabset;

        affordanceState = {
          exclusiveSelection: { index: undefined },
          current: undefined,
          currentMode: undefined,
          getLabels: () => {
            return getLabels(this);
          }
        };

        /*
          Wires up suppored affordances...
        */
        constructor() {
          super();
          this.supportedAffordances.add("tab-bar");
          this.supportedAffordances.add("collapse");
          this.supportedAffordances.add("exclusive-collapse");

          this.observeAffordanceChange((matching, all) => {
            if (!this.__defaults) {
              this.__defaults = {
                onMatch: this.hasAttribute("defaults-on-match"),
                defaultActive: getLabels(this).filter(l =>
                  l.hasAttribute("default-activate")
                )
              };
            }
            this.affordanceState.current = this.getAttribute("affordance");
            this.__configure();
          });

          this.attachShadow({ mode: "open" });
          this.shadowRoot.innerHTML = template;
     
          this.__tabListEl = this.shadowRoot.querySelector("tab-list");
          this.addEventListener(
            "keydown",
            evt => {
              let labels = getLabels(this);
              let size = labels.length;
              let cur = this.affordanceState.exclusiveSelection.index;
              let prev = cur === 0 ? size - 1 : cur - 1;
              let next = cur === size - 1 ? 0 : cur + 1;

              if (
                this.affordanceState.current === "tab-bar" ||
                this.affordanceState.current === "exclusive-collapse"
              ) { 
                if (evt.keyCode == 37 || evt.keyCode == 38) {
                  labels[prev].affordanceState.activate();
                } else if (evt.keyCode == 39 || evt.keyCode == 40) {
                  labels[next].affordanceState.activate();
                }
              } else if (evt.keyCode == 32 && this.affordanceState.current === 'collapse') {
                evt.preventDefault()
              }
            },
            false
          );
          this.addEventListener(
            "keyup", 
            evt => {
              if (evt.keyCode == 32 && this.affordanceState.current === 'collapse') {
                evt.target.closest('[affordance]').affordanceState.activate()
                evt.preventDefault()
              }
            })
        }

        connectedCallback() {
          super.connectedCallback();

          //TODO: check whether there is a hash/handle selection
          
          // If you append a fragment with a pair, it should work
          this.__childListObserver.observe(this, { childList: true });
        }
      }
      customElements.define("spicy-sections", RegionSet);
    })();
    </script>
  <script>
    Array.prototype.slice.call(document.querySelectorAll('.optional [data-src]')).forEach(function (optional) {
      var prefs = window.localStorage.downloadsPrefs,
          clickToSee;
      if (prefs === 'true') {
        activateOptional(optional);
      } else {
        clickToSee = document.createElement('div');
        clickToSee.classList.add('clickToSee')
        clickToSee.innerHTML = '<button>Click to see media</button>';
        clickToSee.style.textAlign = 'center';
        clickToSee.style.border = 'none';
        optional.parentElement.insertBefore(clickToSee, optional.nextSibling);
        clickToSee.firstElementChild.addEventListener('click', function () {
          activateOptional(optional);
        })
      }

    })
  </script>

</body></html>